/* weather-api 0.0.1 - 2015-04-18 */
function setResHeader(a,b,c){b.header('Content-Type", "application/json'),b.header("Access-Control-Allow-Origin","*"),b.header("Access-Control-Allow-Headers","X-Requested-With"),c()}var express=require("express"),app=express(),weather=require("worldweatheronline-node-module"),geotargeting=require("google-geotargeting-node-module"),config=require("nconf");config.argv().env().file({file:"./config.json"}),app.get("/*",setResHeader),app.get("/Weather",function(a,b){weather({key:config.get("weather-key"),q:a.query.latitude+","+a.query.longitude,date:a.query.date},function(a,c,d){a||200!==c.statusCode?b.status(400).send("Error"):b.send(d)})}),app.get("/Location",function(a,b){geotargeting({latlng:a.query.latitude+","+a.query.longitude},function(a,c,d){a||200!==c.statusCode?b.status(400).send("Error"):b.send(d)})}),app.listen(config.get("port"));