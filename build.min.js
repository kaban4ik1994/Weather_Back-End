/* weather-api 0.0.1 - 2015-04-04 */
function setResHeader(a,b,c){b.header('Content-Type", "application/json'),b.header("Access-Control-Allow-Origin","*"),b.header("Access-Control-Allow-Headers","X-Requested-With"),c()}var express=require("express"),app=express(),request=require("request"),weather=require("./weather"),geotargeting=require("./geotargeting");app.get("/*",setResHeader),app.get("/Weather",function(a,b){weather(a.query.latitude+","+a.query.longitude,a.query.date,"70388b130b191be8c6a64da274a27",function(a,c,d){a||200!==c.statusCode?b.status(400).send("Error"):b.send(d)})}),app.get("/Location",function(a,b){geotargeting(a.query.latitude+","+a.query.longitude,function(a,c,d){a||200!==c.statusCode?b.status(400).send("Error"):b.send(d)})}),app.listen(1337);var baseUrlApiWeather="http://api.worldweatheronline.com/free/v2/weather.ashx",request=require("request"),weather=function(a,b,c,d){var e={key:c,format:"json",num_of_days:1,q:a,date:b};request({url:baseUrlApiWeather,qs:e},d)};module.exports=weather;var baseUrlApiGeotargeting="http://maps.googleapis.com/maps/api/geocode/json",request=require("request"),geotargeting=function(a,b){var c={latlng:a,language:"EN",sensor:!1};request({url:baseUrlApiGeotargeting,qs:c},b)};module.exports=geotargeting;