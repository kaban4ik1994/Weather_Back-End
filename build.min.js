/* weather-api 0.0.1 - 2015-03-31 */
var baseUrlApiWeather="http://api.worldweatheronline.com/free/v2/weather.ashx",baseUrlApiGeotargeting="http://maps.googleapis.com/maps/api/geocode/json",express=require("express"),app=express(),request=require("request"),weather=require("./weather"),geotargeting=require("./geotargeting");app.get("/Weather",function(a,b){b.header('Content-Type", "application/json'),b.header("Access-Control-Allow-Origin","*"),b.header("Access-Control-Allow-Headers","X-Requested-With"),weather(baseUrlApiWeather,a.query.latitude+","+a.query.longitude,a.query.date,function(a,c,d){a||200!==c.statusCode?b.status(400).send("Error"):b.send(d)})}),app.get("/Location",function(a,b){b.header("Content-Type","application/json"),b.header("Access-Control-Allow-Origin","*"),b.header("Access-Control-Allow-Headers","X-Requested-With");({latlng:a.query.latitude+","+a.query.longitude,language:"EN",sensor:!1});geotargeting(baseUrlApiGeotargeting,a.query.latitude+","+a.query.longitude,function(a,c,d){a||200!==c.statusCode?b.status(400).send("Error"):b.send(d)})}),app.listen(1337,function(){});var request=require("request"),weather=function(a,b,c,d){var e={key:"70388b130b191be8c6a64da274a27",format:"json",num_of_days:1,q:b,date:c};request({url:a,qs:e},d)};module.exports=weather;var request=require("request"),geotargeting=function(a,b,c){var d={latlng:b,language:"EN",sensor:!1};request({url:a,qs:d},c)};module.exports=geotargeting;